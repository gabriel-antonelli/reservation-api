generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

model User {
  id                 Int       @id @default(autoincrement())
  email              String    @unique @db.VarChar(255)
  name               String    @db.VarChar(255)
  password           String
  resetPasswordToken String?
  resetPasswordDate  DateTime?
  Event              Event[]
  Chair              Chair[]
}

model Event {
  id                Int                 @id @default(autoincrement())
  userId            Int
  title             String              @db.VarChar(150)
  subjects          String[]
  categories        String[]
  description       String              @db.VarChar(450)
  isPrivate         Boolean
  ageGroup          String              @db.VarChar(20)
  User              User                @relation(fields: [userId], references: [id])
  Room              Room[]
  EventLocalization EventLocalization[]
}

model EventLocalization {
  id          Int    @id @default(autoincrement())
  eventId     Int
  name        String @db.VarChar(150)
  description String @db.VarChar(450)
  address     String @db.VarChar(150)
  state       String @db.VarChar(50)
  city        String @db.VarChar(50)
  country     String @db.VarChar(50)
  Event       Event  @relation(fields: [eventId], references: [id])
}

model Room {
  id          Int      @id @default(autoincrement())
  eventId     Int
  type        String   @db.VarChar(150)
  initialDate DateTime
  endDate     DateTime
  duration    String
  seelingEnd  DateTime
  chairs      Int
  Event       Event    @relation(fields: [eventId], references: [id])
  Ticket      Ticket[]
  Chair       Chair[]
}

model Ticket {
  id       Int     @id @default(autoincrement())
  roomId   Int
  type     String  @db.VarChar(150)
  price    Decimal
  quantity Int
  Room     Room    @relation(fields: [roomId], references: [id])
  Chair    Chair[]
}

model Chair {
  id                  Int      @id @default(autoincrement())
  userId              Int
  roomId              Int
  ticketId            Int
  chairIndetification String   @db.VarChar(30)
  updatedAt           DateTime @default(now())
  User                User     @relation(fields: [userId], references: [id])
  Room                Room     @relation(fields: [roomId], references: [id])
  Ticket              Ticket   @relation(fields: [ticketId], references: [id])
}
